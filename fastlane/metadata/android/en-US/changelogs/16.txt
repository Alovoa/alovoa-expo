UI improvements and bug fixes